{"ast":null,"code":"var _jsxFileName = \"/home/vinicius/Desktop/Aplica\\xE7\\xE3o 1 - UFMG/client/src/pages/Autenticado.jsx\";\nimport React from 'react';\nimport axios from 'axios';\nimport { saveCookie, getCookie, removeCookie } from \"../cookie/cookieSession\";\nimport { saveCookieUserInfo, getCookieUserInfo, getAllCookieUserInfo, removeCookieUserInfo } from '../cookie/cookieUserInfo'; //Função de Logout\n\nfunction logout() {\n  //Coleta dos cookies o idToken e o sessionState\n  const idtoken = getCookie('ID_TOKEN');\n  const sessionState = getCookie('SESSION_STATE'); //Rota que envia para o back-end o idToken e o sessionState\n\n  axios.post('/logout', {\n    idToken: idtoken,\n    state: sessionState\n  }).then(function (url_logout) {\n    console.log(url_logout);\n    removeCookie();\n    removeCookieUserInfo();\n    window.location.href = url_logout.data;\n  });\n} //Função pegar dados do usário do ID ToKen\n\n\nfunction token() {\n  axios.get('/token').then(token_access => {\n    console.log(\"OS DADOS DO TOKEN SAO: \", token_access.data);\n    saveCookie(token_access.data); //Armazena os dados do token em cookie\n  });\n} //Função que solicita as informações do usuário\n\n\nfunction userinfo() {\n  axios.get('/infouser').then(infouser => {\n    console.log(\"AS USER INFO SAO: \", infouser.data);\n    saveCookieUserInfo(infouser.data); //Armazena as informações do usuário em cookie\n  });\n}\n\nfunction Receita() {\n  var permition = 5;\n  const rolesCookie = getAllCookieUserInfo();\n  console.log(rolesCookie.ROLES);\n\n  for (var i = 0; i < 10; i++) {\n    if (rolesCookie.ROLES[i] === \"TEAM_TI\") {\n      console.log(\"PERMITIDO ENTRAR\");\n      window.location.href = \"http://localhost:3000/Receita\";\n      permition = 1;\n    }\n  }\n\n  console.log(\"Number of permition: \", permition);\n\n  if (permition === 5) {\n    axios.get('/login2').then(url_login => {\n      window.location.href = url_login.data; //Abre no brwoser a URL de login recebida.\n    });\n  }\n}\n\nclass Logado extends React.Component {\n  render() {\n    token();\n    userinfo();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Logado-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"Texto2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, \"Autentica\\xE7\\xE3o Realizada!\"), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"Texto3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, \" Aplica\\xE7\\xE3o Exemplo\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"botao\",\n      onClick: Receita,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, \"Receita\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"botao\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, \"Despesas\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"botao\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }, \"Licita\\xE7\\xF5es\")), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"button-logout\",\n      onClick: logout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, \"Logout\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default Logado;","map":{"version":3,"sources":["/home/vinicius/Desktop/Aplicação 1 - UFMG/client/src/pages/Autenticado.jsx"],"names":["React","axios","saveCookie","getCookie","removeCookie","saveCookieUserInfo","getCookieUserInfo","getAllCookieUserInfo","removeCookieUserInfo","logout","idtoken","sessionState","post","idToken","state","then","url_logout","console","log","window","location","href","data","token","get","token_access","userinfo","infouser","Receita","permition","rolesCookie","ROLES","i","url_login","Logado","Component","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {saveCookie, getCookie, removeCookie} from \"../cookie/cookieSession\";\nimport {saveCookieUserInfo, getCookieUserInfo, getAllCookieUserInfo, removeCookieUserInfo} from '../cookie/cookieUserInfo';\n\n\n\n//Função de Logout\nfunction logout() {\n   \n    \n    //Coleta dos cookies o idToken e o sessionState\n    const idtoken = getCookie('ID_TOKEN');\n    const sessionState = getCookie('SESSION_STATE');\n    \n\n    //Rota que envia para o back-end o idToken e o sessionState\n      axios\n      .post('/logout', {\n          idToken: idtoken,\n          state: sessionState,\n      })\n      .then(function (url_logout){\n          console.log(url_logout);\n          removeCookie();\n          removeCookieUserInfo();\n          window.location.href = url_logout.data;\n      })\n      \n    }\n\n\n\n//Função pegar dados do usário do ID ToKen\nfunction token () {\n    axios\n    .get('/token')\n    .then(token_access => {\n    console.log(\"OS DADOS DO TOKEN SAO: \", token_access.data)\n    saveCookie(token_access.data); //Armazena os dados do token em cookie\n    });\n\n}\n\n\n//Função que solicita as informações do usuário\nfunction userinfo (){\n    axios\n    .get('/infouser')\n    .then(infouser => {\n    console.log(\"AS USER INFO SAO: \", infouser.data)\n    saveCookieUserInfo(infouser.data); //Armazena as informações do usuário em cookie\n    });\n\n   \n}\n\n\n\nfunction Receita (){\nvar permition = 5;  \n\n    const rolesCookie = getAllCookieUserInfo();\n\n    console.log(rolesCookie.ROLES);\n   for (var i=0; i < 10; i++){\n    \n        if(rolesCookie.ROLES[i] === \"TEAM_TI\" ){\n            console.log(\"PERMITIDO ENTRAR\");\n            window.location.href = \"http://localhost:3000/Receita\"\n            permition = 1;\n        }\n   }\n\nconsole.log (\"Number of permition: \", permition);\n\n   if (permition === 5){\n\n    axios\n    .get('/login2')\n    .then(url_login => {\n      window.location.href = url_login.data //Abre no brwoser a URL de login recebida.\n    })\n   }\n\n}\n\n\n\n\nclass Logado extends React.Component{\n  \n    \n    \n    render (){\n        \n        token();\n        userinfo();\n        \n\n\n            \n        return (\n            <div className=\"Logado-header\">\n                <h2 className=\"Texto2\" >Autenticação Realizada!</h2>\n                <h2 className=\"Texto3\"> Aplicação Exemplo</h2>\n\n                <br></br>\n\n\n<div>\n                <button\n                            className=\"botao\"\n                             onClick = {Receita}\n                            >\n                                Receita\n                    </button>\n               \n\n                <button\n                            className=\"botao\"\n                            \n                            >\n                                Despesas\n                    </button>\n\n                    <button\n                            className=\"botao\"\n        \n                            >\n                                Licitações\n                    </button>\n\n                    \n</div>\n\n                <button\n                            className=\"button-logout\"\n                             onClick = {logout}\n                            >\n                                Logout\n                            </button>\n                <br></br>\n\n\n                <div >\n                \n                </div>\n            </div>\n\n\n        )\n\n\n    }\n\n\n\n\n}\n\n\n\n\nexport default Logado;"]},"metadata":{},"sourceType":"module"}